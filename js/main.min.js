try{
 $(_=>{
   var scrollVal, blur = $(".sec1, .sec2, .sec3,.sec4,.sec5, header, .copyRight,.footer ,.toTop,.header, .allServ, .carsouselMain, .project, .allBlogs, .allFAQ")
   , onload, targetPage = $("title").text().replace(" | Tedx-Ismailia", "");
 
   let closeSubMenu = _=>{
     $(".subMenu").animate({width: "0"}, 500)
       $("._2").css("width", "22px")
       $("._1, ._3").css("transform", "rotate(0deg)")
       $("._3").css({marginTop: "0px"})
       $("hr").css("background-color", "#ffa211")
   }
   let scroll =  (val, time)=>{
     $("html, body").animate({scrollTop: val}, time)
   }
   let scrollCont = _=>{
     if(scrollVal >= $(window).height()){
       $(".toTop").attr("class", "toTop animate__animated animate__fadeInUp").css("bottom", "60px")
     } else{   
       $(".toTop").attr("class", "toTop animate__animated animate__fadeOutDown")
     }
     if(scrollVal != 0 && scrollVal != undefined){
     $("header nav a").css("color", "white")
     $("header").css("background-color", "rgba(0, 0, 0, 0.8)")
     $("header nav a."+targetPage).css("color", "#ffa211")
     $(".progress").css("background-color", "rgba(128, 128, 128, 0.2)")
     } else{
       $("header").css("background-color", "rgba(0, 0, 0, 0.5)")
       $(".progress").css("background-color", "transparent")
       $("header nav a").css("color", "white")
       $("header nav a."+targetPage).css("color", "#ffa211")
     }
     $(".progress-bar").css("width", (scrollVal/($(document).height()-$(window).height()))*100 + "%")
   }
 
   // Menu Control
   $(".bar").on("click", _=>{
     if($(".subMenu").css("width") !="0px"){
       setTimeout(_=>{
         blur.css("filter", "blur(0px)")
       }, 500)
       closeSubMenu()
     } else{
       blur.css("filter", "blur(4px)")
       $(".subMenu").animate({width: "100%"}, 500, _=>{
       $("nav").fadeIn(100)
       })
       $("hr").css("background-color", "white")
       $("._2").css("width", "0px")
       $("._1").css("transform", "rotate(45deg)")
       $("._3").css({transform: "rotate(-46deg)", marginTop: "-15px"})
     }
   });
   $(".subMenu").on("click", _=>{
     closeSubMenu()
   });
   $(".bgMenu, .subNav").on("click", (e)=>{
     e.stopPropagation()
   });
   $(".CONTACT").on("click", _=>{
     $(".bar").trigger('click')
     blur.css("filter", "blur(0px)")
     setTimeout(_=>{
       scroll($(window).height()*10, 3000)
     },500)
   })
   // On Load
   onload = (function(){
     $("#icon0").attr("class", "fa fa-chevron-up")
     scroll(0, 500)  
     $(".sec4 .cont").css("width", (350*$(".sec4 .cont").children().length))
     $(".ch-bg, .sec3").css("height", $(".sec3 .all").height()+70)
     scrollCont()
     $("header nav a."+targetPage).css("color", "#ffa211")
     let readySt = _=>{
       setTimeout(_=>{
         let ready = document.readyState;
         if(ready.toLowerCase() !="complete"){
           readySt()
         }else{
           $(".Loading").fadeOut()
         }
       }, 500)
     }
     readySt()
   }());
 
   // Scroll Control
   $(window).scroll(_=>{
     scrollVal = $(window).scrollTop()
     scrollCont()
   });
 
   // Resize Control
   $(window).resize(_=>{
     //$(".ch-bg, .sec3").css("height", $(".sec3 .all").height()+70)
   });
 
   // Home
   (function(){
     setInterval(_=>{
       if($(".bg1").css("display") !="none"){
         $(".bg1").fadeOut(1000);
         $(".bg2").fadeIn(1000);
       } else{
         $(".bg2").fadeOut(1000);
         $(".bg1").fadeIn(1000);
       }
     }, 10000)
   })();
   $(".svgDown, .fa-angle-double-down").on("click", _=>{
     scroll($(window).height(), 800)
   })
   setTimeout(_=>{
    $(".adCont").fadeOut(400)
      $(".ticketLink").on("click", _=>{
        $(".ad").css("width","100%");
        setTimeout(_=>{
          $(".adCont").fadeIn(400)
        }, 600)
      })
      $(".closeAD").on("click", _=>{
        $(".adCont").fadeOut(400, _=>{
        $(".ad").css("width", "0%")
      })
      })
    }, 1000) 
 
   // Subscribe
   $("#closeSub").on("click", _=>{
     $(".subscribeSec form").fadeOut(500, _=>{
       $(".subscribeSec").css("height", "0" )
     })
   });
   $("#subscribe, #subMenu, #sub2Menu").on("click", _=>{
     $(".subscribeSec").css("height", "100vh")
     setTimeout(_=>{
       $(".subscribeSec form").fadeIn(500)
     },1000)
   });
   $("#closeMessage").on("click", _=>{
     $(".messageSec .all, .messageSec i").fadeOut(500, _=>{
       $(".messageSec").css("height", "0" )
     })
   });
 
   // Message
   $("#messages").on("click", _=>{
     $(".messageSec").css("height", "100vh")
     setTimeout(_=>{
       $(".messageSec .all, .messageSec i").fadeIn(500)
     },1000)
   });
 
   // To Top 
   $(".toTop").on("click", _=>{
     scroll(0, 1000)
   });
 
   // On scroll Animation
   $(window).on('load scroll resize', function() {
     $('.secCont, .header .cont').anisview({
       animation: 'fadeIn',
       direction: 'both'
     })
     $('.sec2 .all .ser').anisview({
         animation: 'bounceIn',
         direction: 'both'
     })
     $('.sec3 .all .res').anisview({
       animation: 'fadeInLeft',
       direction: 'both'
     })
     $('.sec4 .cont .card').anisview({
       animation: 'fadeIn',
       direction: 'both'
     })
     $('.sec5 .cont .card').anisview({
       animation: 'fadeIn',
       direction: 'both'
     })
     $('.allServ .cont .card').anisview({
       animation: 'fadeInLeft',
       direction: 'both'
     })
     $('.project .cont .card').anisview({
       animation: 'bounce',
       direction: 'both'
     })
     $('.allBlogs .card').anisview({
       animation: 'fadeInRight',
       direction: 'both'
     })
   })
 
   // Data
   $.getJSON('../siteData/data.json', (data)=>{
     let home = data.home
     , serv = data.services
     , port = data.portfolio
     , faq = data.faqs
     , blog = data.blogs
     , m = -1;
     $(".secCont").append( `
     <h1>${home.fName} <strong>${home.sName}</strong></h1>
     <h5> ${home.mainDescription}  </h5>
     `)
     for(let i in home.whyChooseUs){
       let res = `
       <div class="res">
         <i class="fa ${home.whyChooseUs[i].icon}"></i>
         <h3> ${home.whyChooseUs[i].title} </h3>
         <p> ${home.whyChooseUs[i].details} </p>
       </div>
       `
       $(".sec3 .all").append(res)
     }
     for(let i in home.testiMonials){
       let testi = `
         <div class="card">
           <p class="card-text"> ${home.testiMonials[i].testi} </p>
           <div class="block">
             <em class="date"> ${home.testiMonials[i].date} </em>
             <em class="author"> ${home.testiMonials[i].clientName} </em>
           </div>
           <img class="author-img" src="${home.testiMonials[i].clientImgSrc}">
         </div>  
       `
       $(".sec4 .cont").append(testi)
     }
     for(let i in home.team){
       let team = `
       <div class="card">
         <img class="card-img-top" src="${home.team[i].imgSrc}">
         <div class="card-body">
           <h3 class="card-title"> ${home.team[i].memName} </h3>
           <p class="card-text"> ${home.team[i].memRole} </p>
         </div>
       </div>
       `
       $(".sec5 .cont").append(team)
     }
     for(let i in port.projects){
       let pCard = `
       <div class="card">
        <img class="card-img-top" src="${port.projects[i].imgSrc}">
        <div class="card-body">
         <h3 class="card-title"> ${port.projects[i].projectTitle} </h3>
         <p class="card-text"> ${port.projects[i].projectDetails} </p>
         <a href="${port.projects[i].revLink}" class="btn btn-outline-secondary"> REVIEW </a>
       </div>  
       `
       $(".project .cont").append(pCard)
     }
     for(let i in port.slider){
       let pSlide = `
       <div class="carousel-item ${port.slider[i].active}">
        <img class="d-block imgMainSlid" src="${port.slider[i].imgSrc}">
        <div class="carousel-caption">
         <h3 > ${port.slider[i].slideTitle} </h3>
         <p> ${port.slider[i].slideDetails} </p>
       </div>  
       `
       let indicator = `
       <li data-target="#mainSlider" data-slide-to="${i}" class="${port.slider[i].active}">
       `
       $("#mainSlider .carousel-inner").append(pSlide)
       $("#mainSlider ol").append(indicator)
     }
     for(let i in serv.service){
       let sCard = `
       <div class="card">
        <img class="card-img-top" src="${serv.service[i].imgSrc}">
        <div class="card-body">
         <h3 class="card-title"> ${serv.service[i].servTitle} </h3>
         <p class="card-text"> ${serv.service[i].servDetails} </p>
       </div>  
       `
       $(".allServ .cont").append(sCard)
     }
     for(let i in faq.allQ){
       m++
       let qCont = `
       <button class="btn btn-block" data-toggle="collapse" data-target="#ans${m}" id="q${m}"> ${faq.allQ[i].question}  <i class="fa fa-chevron-down" id="icon${m}"></i> </button>
       <p class="ans collapse ${faq.allQ[i].st}" id="ans${m}">  ${faq.allQ[i].ans} 
       `
       $(".allFAQ .qCont").append(qCont)
     }
     for(let i in blog.allBlogs){
       let bCard = `
         <div class="card">
           <img class="card-img-top" src="${blog.allBlogs[i].mainImgSrc}">
           <img class="author-img" src="${blog.allBlogs[i].authorImgSrc}">
           <div class="card-body">
             <div class="block">
               <em class="date"> ${blog.allBlogs[i].date} </em>
               <em class="author"> ${blog.allBlogs[i].authorName} </em>
             </div>  
             <h3 class="card-title"> ${blog.allBlogs[i].blogTitle} </h3>
             <a href="${blog.allBlogs[i].revLink}"> READ MORE </p>
         </div>  
       `
       $(".allBlogs").append(bCard)
     }
     for(let i in data.footer.socialIcons){
       let sIcon = `
         <a src="${data.footer.socialIcons[i].src}" class="fa ${data.footer.socialIcons[i].class}"></a>
       `
       $(".copyRight .social").append(sIcon)
     }
     $(".faqHead .cont p").text(faq.mainDescription)
     $(".faqHeader .cont p").text(faq.mainDescription)
     $(".blogHeader .cont p").text(faq.mainDescription)
     $(".footer h3").text(`${data.footer.mainTitle}`)
     $(".footer p").text(`${data.footer.description}`)
     $(".copyRight h3").text($(".copyRight h3").text()+`${data.footer.copyRight}`)
     
     // Faq Up & Down
     $("#icon0").attr("class", "fa fa-chevron-up")
     $(".btn-block").on("click", function(){
       let num = this.id.match(/[0-9]/gmi).join("")
       console.log(num)
       $("#icon"+ num).attr("class", "fa fa" +( ($("#ans"+ num).attr("class").match("show") == null)? "-chevron-up":"-chevron-down"))
     })
     // Home
     $(".ch-bg, .sec3").css("height", $(".sec3 .all").height()+70)
     $(window).resize(_=>{
       $(".ch-bg, .sec3").css("height", $(".sec3 .all").height()+70)
     });
     $(".sec4 .cont").css("width", (350*$(".sec4 .cont").children().length))
 
   })
 
   onload
 });
 // Validating
 (_=>{
   function validateForm() {
     var name =  document.getElementById('name').value;
     if (name == "") {
         document.querySelector('.status').innerHTML = "Name cannot be empty";
         return false;
     }
     var email =  document.getElementById('email').value;
     if (email == "") {
         document.querySelector('.status').innerHTML = "Email cannot be empty";
         return false;
     } else {
         var re = /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
         if(!re.test(email)){
             document.querySelector('.status').innerHTML = "Email format invalid";
             return false;
         }
     }
     var subject =  document.getElementById('subject').value;
     if (subject == "") {
         document.querySelector('.status').innerHTML = "Subject cannot be empty";
         return false;
     }
     var message =  document.getElementById('message').value;
     if (message == "") {
         document.querySelector('.status').innerHTML = "Message cannot be empty";
         return false;
     }
     document.querySelector('.status').innerHTML = "Sending...";
   }
   $('status').innerHTML = "Sending...";
   formData = {
   'name'     : $('input[name=name]').val(),
   'email'    : $('input[name=email]').val(),
   'subject'  : $('input[name=subject]').val(),
   'message'  : $('textarea[name=message]').val()
   };
   $.ajax({
   url : "php/mail.php",
   type: "POST",
   data : formData,
   success: function(data, textStatus, jqXHR)
   {
 
   $('#status').text(data.message);
   if (data.code) //If mail was sent successfully, reset the form.
   $('#contact-form').closest('form').find("input[type=text], textarea").val("");
   },
   error: function (jqXHR, textStatus, errorThrown)
   {
   $('#status').text(jqXHR);
   }
   });
 });
 
} catch(e){
 if(e.match("Cross-Origin") != null){
   alert("Ooh, Please try the site on server. ")
 } else{
   alert(e)
 }
}